{% load i18n %}
<div id="condition-set-header" class="row justify-content-center">
  <button type="button"
          class="btn btn-sm btn-primary js-condition-create{% if not has_data %} disabled{% endif %}"
          data-url="{% url 'action:create_condition' action.id %}"
          style="margin-bottom: 0.5ex;"
          data-toggle="tooltip"
          title="{% trans 'Define a text condition to insert in the text body below.' %}">
    <span class="fa fa-plus"></span> {% trans 'New Condition' %}</button>
</div>
<div id="condition-set" class="row conditions justify-content-center">
  {% for condition in conditions %}
    <div class="condition-btn btn-group">
      <button type="button"
              class="btn btn-primary btn-sm js-condition-edit"
              data-url="{% url 'action:edit_condition' condition.id %}"
              data-toggle="tooltip"
              title="{% blocktrans with n=condition.n_rows_selected %}Edit the condition ({{ n }} rows satisfy this condition){% endblocktrans %}">
        {{ condition.name }} {% blocktrans with n=condition.n_rows_selected count counter=condition.n_rows_selected %}({{ n }} learner){% plural %}({{ n }} learners){% endblocktrans %}
      </button>
      <button type="button" class="btn btn-sm btn-primary dropdown-toggle"
              data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
        <span class="caret"></span>
        <span class="sr-only">{% trans 'Toggle Dropdown' %}</span>
      </button>
      <ul role="menu" class="dropdown-menu">
        <li>
          <button type="button"
                  class="btn btn-outline-dark btn-sm js-condition-insert"
                  data-name="{{ condition.name }}"
                  data-toggle="tooltip"
                  title="{% trans 'Insert text condition into the body.' %}">
            <span class="fa fa-arrow-down"></span> {% trans 'Insert in text' %}
          </button>
        </li>
        <li>
          <button type="button"
                  class="btn btn-outline-dark btn-sm js-condition-edit"
                  data-url="{% url 'action:edit_condition' condition.id %}"
                  data-toggle="tooltip"
                  title="{% trans 'Edit name, description and formula' %}">
            <span class="fa fa-pencil"></span> {% trans 'Edit' %}
          </button>
        </li>
        <li>
          <button type="button"
             class="btn btn-outline-dark btn-sm js-condition-clone"
             data-url="{% url 'action:clone_condition' condition.id %}"
             data-toggle="tooltip"
             title="{% trans 'Create an exact copy of this condition' %}">
            <span class="fa fa-duplicate"></span> {% trans 'Clone' %}
          </button>
        </li>
        <li>
          <button type="button"
                  class="btn btn-outline-danger btn-sm js-condition-delete"
                  data-url="{% url 'action:delete_condition' condition.id %}"
                  data-toggle="tooltip"
                  title="{% trans 'Delete the condition' %}">
            <span class="fa fa-trash"></span> {% trans 'Delete' %}
          </button>
        </li>
      </ul>
    </div>
  {% empty %}
    <p class="text-center">
      {% blocktrans %}Create conditions to show/hide text in the message (optional){% endblocktrans %}</p>
  {% endfor %}
</div>

